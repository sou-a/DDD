datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

generator client {
  previewFeatures = ["selectRelationCount"]
  provider        = "prisma-client-js"
}

model User {
  id            String @id
  userStatusId  String
  name          String
  mailAddress   String

  userStatus UserStatus @relation(fields: [userStatusId], references: [id])
  pair       PairUser?
  team       TeamUser?
  tasks      TaskUser[]
}

// ã“ã“DBã®ã‚¢ãƒ³ãƒãƒ‘ãƒ¼ãƒ³ã«è©²å½“ã™ã‚‹ã®ã§æ–°äº•ã•ã‚“ã®ã‚ˆã†ã«ã‚ã‘ã‚‹ã®ãŒãƒ™ã‚¿ãƒ¼ã®ã¯ãšãªã®ã§ã™ãŒã€
// ãƒªãƒã‚¸ãƒˆãƒªã§ã®å‡¦ç†ãŒ1é›†ç´„1ãƒªãƒã‚¸ãƒˆãƒªã§ã©ã†ã‚„ã‚‹ã‚“ã ï¼Ÿã¨æ€ã£ã¦ã„ãŸã®ã§ã€ç§ã‚ã‘ã‚‰ã‚Œãªã‹ã£ãŸã‚“ã§ã™ã‚ˆã­-...
// ãƒªãƒã‚¸ãƒˆãƒªã‚‚è¦‹ã•ã›ã¦ã„ãŸã ãã¾ã™ã­
model UserStatus {
  id   String @id
  name String @unique

  users User[]
}

model Pair {
  id   String @id
  name String

  users PairUser[]
}

model PairUser {
  pairId String
  userId String @unique

  user User @relation(fields: [userId], references: [id])
  pair Pair @relation(fields: [pairId], references: [id])

  // è¤‡åˆä¸»ã‚­ãƒ¼ã§ã™ã‹ğŸ‘€ã“ã‚Œã¯æ€ã„ã¤ã‹ãªã‹ã£ãŸã§ã™ï¼ãªã‚‹ã»ã©...
  // ã“ã‚Œã§æ‰€å±ã™ã‚‹ã¨ã„ã†ã“ã¨ã‚’å®Ÿç¾ã§ãã‚‹ã®ã‹ã
  @@id([pairId, userId])
}

model Team {
  id   String @id
  name String @unique

  users TeamUser[]
}

model TeamUser {
  teamId String
  userId String @unique

  user User @relation(fields: [userId], references: [id])
  team Team @relation(fields: [teamId], references: [id])

  @@id([teamId, userId])
}

model Task {
  id          String @id
  taskGroupId String
  name        String

  users     TaskUser[]
  taskGroup TaskGroup @relation(fields: [taskGroupId], references: [id])
}

model TaskGroup {
  id   String @id
  name String

  tasks Task[]
}

model TaskUser {
  taskId           String
  userId           String
  taskUserStatusId String

  taskUserStatus TaskUserStatus @relation(fields: [taskUserStatusId], references: [id])
  user           User @relation(fields: [userId], references: [id])
  task           Task @relation(fields: [taskId], references: [id])

  @@id([taskId, userId])
}

model TaskUserStatus {
  id          String @id
  name        String @unique

  taskUsers TaskUser[]
}
